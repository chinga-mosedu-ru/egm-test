/******/!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}// webpackBootstrap
/******/
var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(1),i=n(2),c=n(3),o=n(4),a=n(5),l=n(6),s=n(7),u=n(8),p=n(9);angular.module("egm",[]).config(r.config).run(i.runBlock).controller("MainController",c.MainController).directive("percentField",o.percentFieldDirective).directive("percentSlider",a.percentSliderDirective).directive("percentControl",l.percentControlDirective).directive("percentGroup",s.percentGroupDirective).directive("toNumber",u.toNumber).service("ServerMock",p.ServerMock)},function(e,t){"use strict";function n(e){"ngInject";e.debugEnabled(!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.config=n,n.$inject=["$logProvider"]},function(e,t){"use strict";function n(e){"ngInject";e.debug("runBlock end")}Object.defineProperty(t,"__esModule",{value:!0}),t.runBlock=n,n.$inject=["$log"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r){"ngInject";n(this,e),this.server=r,this.getItems(4),this.items=[],this.$scope=t}return e.$inject=["$scope","ServerMock"],r(e,[{key:"getItems",value:function(e){var t=this;this.server.loadItems(e).then(function(e){t.items=e.items,t.$scope.$broadcast("data.loaded")})}}]),e}();t.MainController=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){"ngInject";var e={restrict:"E",templateUrl:"app/components/input/percent/field/percent.field.html",scope:{percent:"=",max:"=",locked:"="},controller:c,controllerAs:"ct",bindToController:!0};return e}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.percentFieldDirective=r;var c=function(){function e(t){"ngInject";n(this,e),this.val=this.percent,this.$scope=t}return e.$inject=["$scope"],i(e,[{key:"startVal",value:function(){this.val=this.percent}},{key:"emitChange",value:function(){(this.percent>100||this.percent<0||!this.percent)&&(this.percent=this.val),this.$scope.$emit("changed",{diff:this.val-this.percent}),this.val=this.percent}},{key:"filterValue",value:function(e){var t=e.keyCode;return 46==t||8==t||9==t||27==t||13==t||65==t&&event.ctrlKey===!0||t>=35&&39>=t?!0:e.shiftKey||(48>t||t>57)&&(96>t||t>105)?(e.preventDefault(),!1):void 0}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){"ngInject";var e={restrict:"E",templateUrl:"app/components/input/percent/slider/percent.slider.html",scope:{percent:"=",locked:"=",max:"=",key:"@"},controller:c,controllerAs:"ct",bindToController:!0};return e}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.percentSliderDirective=r;var c=function(){function e(t){"ngInject";n(this,e),this.val=this.percent,this.$scope=t}return e.$inject=["$scope"],i(e,[{key:"startVal",value:function(){this.val=this.percent}},{key:"emitChange",value:function(){this.percent>this.max&&(this.percent=this.max),this.$scope.$emit("changed",{diff:this.val-this.percent}),this.val=this.percent}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){var e={restrict:"E",templateUrl:"app/components/input/percent/percent.control.html",controller:c,controllerAs:"ct",scope:{label:"=",percent:"=",locked:"=",max:"=",key:"=index"},bindToController:!0};return e}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.percentControlDirective=r;var c=function(){function e(t){"ngInject";var r=this;n(this,e),t.$on("changed",function(e,n){var i=n.diff;e.stopPropagation(),t.$emit("percent.changed",{diff:i,key:r.key})}),this.$scope=t}return e.$inject=["$scope"],i(e,[{key:"toggleLock",value:function(){this.locked=!this.locked,this.$scope.$emit("lock.toggled",{locked:this.locked,value:this.percent})}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){var e={restrict:"E",templateUrl:"app/components/input/percent/percent.group.html",scope:{items:"="},controller:c,controllerAs:"ct",bindToController:!0};return e}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.percentGroupDirective=r;var c=function(){function e(t){"ngInject";var r=this;n(this,e),this.max=100,t.$on("percent.changed",function(e,t){var n=t.key,i=t.diff;r.arrange(n,i)}),t.$on("lock.toggled",function(e,t){var n=t.locked,i=t.value;n?r.max-=i:r.max+=i}),t.$on("data.loaded",function(){r.items=null;var e=t.$watch("items",function(){e(),r.check(),r.max=100})})}return e.$inject=["$scope"],i(e,[{key:"check",value:function(){var e=0;for(var t in this.items)this.items.hasOwnProperty(t)&&(e+=this.items[t].Percent);this.arrange(null,this.max-e)}},{key:"arrange",value:function(e,t){var n=void 0;if(0>t){if(n=this.findMax(e),!n)return;if(n.Percent+t<0){var r=parseFloat(t)+parseFloat(n.Percent);return n.Percent=0,this.arrange(e,r)}}else{if(n=this.findMin(e),!n)return;if(n.Percent+t>this.max){var r=parseFloat(t)-parseFloat(this.max-n.Percent);return n.Percent=this.max,this.arrange(e,r)}}return n.Percent=Math.round(1e3*(parseFloat(n.Percent)+parseFloat(t)))/1e3}},{key:"findMin",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=this.max,n=0;if(1==this.items.length)return!1;for(var r in this.items)if(e!=r&&this.items.hasOwnProperty(r)){if(this.items[r].locked)continue;this.items[r].Percent<t&&(n=r)}return this.items[n]}},{key:"findMax",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=0,n=void 0;if(1==this.items.length)return!1;for(var r in this.items)if(e!=r&&this.items.hasOwnProperty(r)){if(this.items[r].locked)continue;this.items[r].Percent>t&&(n=r)}return this.items[n]}}]),e}()},function(e,t){"use strict";function n(){return{require:"ngModel",restrict:"A",link:function(e,t,n,r){r.$parsers.push(function(e){return""+e}),r.$formatters.push(function(e){return e>100&&(e=100),0>e&&(e=100),parseFloat(e,10)})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.toNumber=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){"ngInject";n(this,e),this.$q=t}return e.$inject=["$q"],r(e,[{key:"loadItems",value:function(e){return this.$q(function(t,n){setTimeout(function(){for(var n=[],r=0,i=100,c=0;e>c;c++)n.push({Name:"Item "+c,Percent:Math.floor(Math.random()*(i-r+1))+r});t({items:n})},100)})}}]),e}();t.ServerMock=i}]),angular.module("templates").run(["$templateCache",function(e){e.put("app/components/input/percent/percent.control.html",'<div class="row"><div class="col-md-2"><label>{{ct.label}}</label><div ng-class="{active: ct.locked}" ng-click="ct.toggleLock()" class="btn btn-default"><i class="glyphicon glyphicon-lock"></i></div></div><div class="col-md-8"><percent-slider percent="ct.percent" locked="ct.locked" max="ct.max"></percent-slider></div><div class="col-md-2"><percent-field percent="ct.percent" locked="ct.locked" max="ct.max"></percent-field></div></div>'),e.put("app/components/input/percent/percent.group.html",'<div class="row"><div ng-repeat="(k,item) in ct.items" class="col-md-12"><percent-control index="k" label="item.Name" percent="item.Percent" locked="item.locked" max="ct.max"></percent-control></div></div>'),e.put("app/components/input/percent/field/percent.field.html",'<input type="number" ng-model="ct.percent" ng-change="ct.emitChange($event)" ng-focus="startVal()" min="0" max="{{ct.max}}" to-number="" ng-disabled="ct.locked" class="form-control">'),e.put("app/components/input/percent/slider/percent.slider.html",'<input type="range" min="0" max="100" step="0.1" ng-model="ct.percent" ng-pattern="ct.pattern" ng-change="ct.emitChange($event)" ng-focus="ct.startVal()" ng-disabled="ct.locked">')}]);
//# sourceMappingURL=../maps/scripts/app-90b510af32.js.map